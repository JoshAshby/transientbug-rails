#!/usr/bin/env ruby
begin
  load File.expand_path('../spring', __FILE__)
rescue LoadError => e
  raise unless e.message.include?('spring')
end

APP_PATH = File.expand_path('../config/application', __dir__)

require_relative '../config/boot'
require_relative '../config/environment'

seen = []

loop do
  msg = SampleBot.client.get_updates.last
  next if seen.include? msg[:update_id]
  seen << msg[:update_id]
  SampleBot.call msg[:message]
  sleep 5
end
