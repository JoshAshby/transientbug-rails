- content_for :page_title do
  Service Announcements

- content_for :menu do
  .item.hidden{ data: { group: "bulk-edit-menu" } }
    .divider
    .header Bulk Actions
    .menu
      .item
        = bulk_edit_action "deactivate-all", url: admin_service_announcements_bulk_deactivate_path, class: "ui fluid icon button" do
          %i.hide.icon
          deactivate all

      .item
        = bulk_edit_action "delete-all", url: admin_service_announcements_bulk_delete_path, class: "ui fluid icon negative basic button" do
          %i.trash.icon
          delete all


%table.ui.celled.table
  %thead
    %tr
      %th= select_all_checkbox
      %th Actions
      %th ID
      %th Title
      %th Message
      %th Active?
      %th Effective During
      %th Created At

  %tbody
    - if @service_announcements.any?
      - @service_announcements.each do |service_announcement|
        %tr
          %td.collapsing= model_tag service_announcement, only: [ :id, :title ]
          %td.collapsing
            .ui.buttons
              = link_to admin_service_announcement_path(service_announcement), class: "ui icon button" do 
                %i.expand.icon
                view

              .ui.simple.dropdown.icon.button
                %i.dropdown.icon
                .menu
                  = link_to edit_admin_service_announcement_path(service_announcement), class: "item" do
                    %i.edit.icon
                    edit

                  = link_to admin_service_announcement_toggle_index_path(service_announcement), class: "item", method: :post do
                    - if service_announcement.active
                      %i.hide.icon
                      deactivate
                    - else
                      %i.unhide.icon
                      activate

                  .divider
                  .header
                    %i.warning.sign.icon
                    DANGERZONE

                  = modal_tag service_announcement, :delete, url: admin_service_announcement_path(service_announcement) do
                    %i.trash.icon
                    delete

          %td.collapsing= service_announcement.id
          %td= service_announcement.title
          %td= service_announcement.message&.truncate(240)
          %td.collapsing= service_announcement.active
          %td.collapsing
            = service_announcement.start_at&.to_s(:long)
            \-
            = service_announcement.end_at&.to_s(:long)
          %td.collapsing= service_announcement.created_at.to_s(:long)

    - else
      %tr
        %td{ colspan: 7 }
          No service announcements made yet

= paginate @service_announcements
