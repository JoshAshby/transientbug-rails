- content_for :page_title, "All Users"

- content_for :breadcrumbs do
  = link_to "Home", admin_root_url
  = link_to "Users", admin_users_url, aria: { current: "page" }

- content_for :page_actions do
  = link_to "New", new_admin_user_url, class: "button button--gray"

- content_for :page_meta do
  %div( class="flex items-center text-sm leading-5 text-gray-500" )
    = render "components/feather_icon", icon: "users"
    %span.ml-2
      = "#{ @count} User".pluralize @count
      total


%ul( class="min-w-full leading-normal border-gray-300 md:rounded-md border shadow-sm bg-white mb-4" )
  %li( class="px-5 py-5 border-b border-gray-300 text-sm" )
    %div( class="flex items-center justify-between" )
      .mr-2
        = render "components/checkbox" do
          Select All

      .w-full.mr-2.flex.flex-row

      %div
        = paginate @users

%ul( class="min-w-full leading-normal border-gray-300 md:rounded-md border shadow-sm bg-white" )
  - if @users.any?
    - @users.each do |user|
      %li( class="px-5 py-5 border-b border-gray-300 text-sm" )
        %div( class="flex items-center justify-between" )
          %div.mr-2
            = render "components/checkbox"

          %div.w-full.mr-2
            %div( class="text-sm leading-5 font-medium text-gray-900" )
              = user.username
            %div( class="text-sm leading-5 text-gray-500" )
              = user.email

          %div.w-full.mr-2.hidden( class="md:block" )
            .flex
              %strong.mr-1 Roles:
              - user.roles.map(&:name).map(&:humanize).each do |role|
                %span.px-2.inline-flex.text-xs.leading-5.font-semibold.rounded-full.bg-gray-200.text-gray-800.mx-1= role

            .flex
              %strong.mr-1 Created:
              = render "components/time", time: user.created_at

          %div
            .button-group
              = link_to admin_user_path(user), class: "button button--gray" do
                = render "components/feather_icon", icon: "maximize"
                View

              .button.button--gray.button--icon.dropdown.dropdown--hoverable
                = behavior_data "dropdown" do |dataset|
                  %button.dropdown__trigger{  **dataset }
                    = render "components/feather_icon", icon: "chevron-down"

                .dropdown__container.hidden
                  .dropdown__menu
                    .dropdown__row
                      %h6.dropdown__header DangerZone
                      = link_to "Edit", edit_admin_user_path(user), class: "dropdown__link"

  - else
    %li( class="px-5 py-5 border-b border-gray-300 text-sm" )
      No users yet (this might be a problem, yo)
