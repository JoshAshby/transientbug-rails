<% content_for :page_header do %>
  <%= render Admin::PageHeaderComponent.new do |c| %>
    <% c.title do %>
      Viewing Bookmark
    <% end %>

    <% c.tabs do %>
      <%= link_to "Cache Details", "#", class: "tab active" %>
      <%= link_to "Edit", "#", class: "tab" %>
    <% end %>
  <% end %>

  <%= render Admin::BreadcrumbsComponent.new do |c| %>
    <% c.crumbs([
      { name: "Bookmarks", href: admin_bookmarks_path },
      { name: @bookmark.id, href: admin_bookmark_path(@bookmark) }
    ]) %>
  <% end %>
<% end %>

<% if @bookmark.offline_caches.any? %>
  <div class="flow-root">
    <ul class="-mb-8">
      <% @bookmark.offline_caches.reverse.each do |offline_cache| %>
        <li>
          <div class="relative pb-8">
            <span class="absolute top-4 left-4 -ml-px h-full w-0.5 bg-gray-200" aria-hidden="true"></span>
            <div class="relative flex space-x-3">
              <div>
                <% if offline_cache.error_messages.none? %>
                  <span class="h-8 w-8 rounded-full bg-green-400 flex items-center justify-center ring-8 ring-white">
                    <%= inline_svg_pack_tag "feather/check.svg", class: "h-5 w-5 text-white stroke-current" %>
                  </span>
                <% else %>
                  <span class="h-8 w-8 rounded-full bg-red-400 flex items-center justify-center ring-8 ring-white">
                    <%= inline_svg_pack_tag "feather/alert-circle.svg", class: "h-5 w-5 text-white stroke-current" %>
                  </span>
                <% end %>
              </div>
              <div class="min-w-0 flex-1 pt-1.5 flex justify-between space-x-4">
                <div>
                  <p class="text-sm text-gray-500">Cached <%= offline_cache.assets.count %> <%= "Asset".pluralize offline_cache.assets.count %></p>
                </div>
                <div class="text-right text-sm whitespace-nowrap text-gray-500">
                  <date><%= offline_cache.created_at.to_s(:long) %></date>
                </div>
              </div>
            </div>
          </div>
        </li>
      <% end %>
    </ul>
  </div>
<% else %>
  <%= render Admin::ZeroStateComponent.new do |c| %>
    <% c.title { "No caches yet" } %>
    <% c.actions do %>
      <p>There are no caches for this bookmark yet.</p>
    <% end %>
  <% end %>
<% end %>


